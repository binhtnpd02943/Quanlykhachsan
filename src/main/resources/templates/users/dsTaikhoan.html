<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/admin.html}">
<head>
<meta charset="ISO-8859-1">
</head>
<body>
	<div layout:fragment="header"></div>

	<div layout:fragment="content">
	
		<div class="row">
			
			<article class="col-sm-12">
				<div class="card">
					<div class="card-header">
						<div th:if="${success}"
							class="row alert alert-success alert-dismissible">
							<button type="button" class="close" data-dismiss="alert"
								aria-label="Close">
								<span aria-hidden="true">x</span>
							</button>
							<span th:text="${success}"></span>
						</div>
						<!-- chu css  -->
						<span class="float-left"
							style="color: snow; display: table-cell; font-size: 26px; font-weight: 700; margin: 0; vertical-align: middle">
							Quản Lý Tài Khoản </span>
						<form th:action="@{/users/find}" method="post"
							class="input-group float-left input-group-sm "
							style="width: 500px; margin-left:200px; padding: 10px">
								
							<div class="input-group float-left input-group-sm">
								<input  type="text" name="ten" class="form-control float-right"
									placeholder="Search" >
								<div class="input-group-append">
									<button type="submit" class="btn btn-default">
										<i class="fas fa-search"></i>
									</button>
								</div>
							</div>
						</form>
						<span type="button" class="float-right btn btn-sm"
							data-toggle="modal" data-target="#modelId"> <i
							></i> 
							<input type="submit" value="Thêm Mới" class="btn btn-primary"
							th:if="${edit<true}" /> 
							<input type="submit" value="Chỉnh Sửa"
							class="btn btn-primary" th:if="${edit >= true}" />
						</span>
						
						<!-- Modal -->
						<div class="modal fade" id="modelId" tabindex="-1" role="dialog"
							aria-labelledby="modelTitleId" aria-hidden="true">
							<div class="modal-dialog" style="max-width: 700px; margin-top: 200px"
								role="document">

								<div class="modal-content">
									<div class="modal-header">
										<!--  
									<div th:if="${message !=null}">
										<h3 th:text="${message}"></h3>
									</div>
									-->
										<h5 class="modal-title">Tài Khoản</h5>
										<button type="button" class="close" data-dismiss="modal"
											aria-label="Close">
											<span aria-hidden="true">&times;</span>
										</button>
									</div>
									
									<div class="modal-body">
										<form name="myForm" th:action="@{/users/saveOrUpdate}"
											th:object="${userDto}" method="post">



											<div class="form-group row">
												<label class="col-sm-3 col-form-label"> Tên Tài Khoản</label>
												<div class="col-sm-9">
													<input type="text" class="form-control"
														th:field="*{tentaikhoan}" placeholder="Tên Tài Khoản...">
												</div>
											</div>
											<div class="form-group row">
												<label class="col-sm-3 col-form-label"> Họ Và Tên</label>
												<div class="col-sm-9">
													<input type="text" class="form-control" th:field="*{hoten}"
														placeholder="Họ Và Tên...">
												</div>
											</div>
											<div class="form-group row">
												<label class="col-sm-3 col-form-label">Mật Khẩu</label>
												<div class="col-sm-9">
													<input type="password" id="giathue" class="form-control"
														th:field="*{matkhau}" placeholder="Mật Khẩu...">
												</div>
											</div>
											<div class="form-group row">
												<label class="col-sm-3 col-form-label">Xác Nhận Mật Khẩu</label>
												<div class="col-sm-9">
													<input type="password" class="form-control"
														th:field="*{reMatkhau}" placeholder="Xác Nhận Mật Khẩu...">
												</div>
											</div>
											<div class="row" style="margin: 5px;">
												<div class="form-group col-md-6">
													<label>Số ĐT</label> 
													<input type="tel" id="sodt" class="form-control" th:field="*{sodt}" placeholder="Số Điện Thoại...">

												</div>

												<div class="form-group col-md-6">
													<label>Giới Tính</label> <select th:field="*{gioitinh}"
														class="form-control">
														<option value="" selected>Select All menu</option>
														<option th:value="true">Nam</option>
														<option th:value="false">Nữ</option>
													</select>

												</div>

											</div>
											<div class="row" style="margin: 5px;">
												<div class="form-group col-md-6">
													<label>Email</label> <input type="text"
														class="form-control" th:field="*{email}"
														placeholder="Email...">

												</div>

												<div class="form-group col-md-6">
													<label>Quyền</label> <input type="text"
														class="form-control" th:field="*{role}"
														placeholder="Quyền Người Dùng...">

												</div>

											</div>
											<input type="submit" th:value="Add" class="btn btn-primary"th:if="${edit<true}" /> 
											<input type="submit" value="Update"
												class="btn btn-primary" th:if="${edit >= true}" />
										<a th:href="@{/users/}" class="btn btn-outline-secondary">Cancel</a>
											
										</form>
									</div>
									
									<div class="card-footer">
										<h4>Error :</h4>
										<ul style="color: red;"
											th:if="${#fields.hasErrors('${userDto.*}')}">
											<li th:each="err: ${#fields.errors('${userDto.*}')}"
												th:text="${err}">Input is inncorrect</li>
										</ul>
									</div>
								</div>
							</div>
						</div>
					</div>

					<table class="table table-bordered" style="margin-bottom: 0;">
						<thead class="text-center">
							<tr>
								<th>Tên Tài Khoản</th>
								<th>Mật Khẩu</th>
								<th>Họ Và Tên</th>
								<th>Giới Tính</th>
								<th>Số ĐT</th>
								<th>Email</th>
								<th>Quyền Người Dùng</th>
								<th>Thao Tác</th>
							</tr>

						</thead>
						<tbody>
							<tr th:each="item: ${users}">

								<td th:text="${item.tentaikhoan}"></td>
								<td style="max-width: 250px;" th:text="${item.matkhau}"></td>
								<td th:text="${item.hoten}"></td>
								<td><span th:text="${item.gioitinh} ? 'Nam':'Ná»¯'"></span></td>
								<td th:text="${item.sodt}"></td>
								<td th:text="${item.email}"></td>
								<td th:text="${item.role}"></td>


								<td class="text-right py-0 align-middle">
									<div class="btn-group btn-group-sm">
										<a th:href="@{'/users/edit/' + ${item.tentaikhoan}}"
											class="btn btn-primary" ><i class="fas fa-pencil-alt"></i></a>
										<a th:href="@{'/users/delete/' + ${item.tentaikhoan}}"
											class="btn btn-danger"><i class="fas fa-trash"></i></a>
									</div>
								</td>

							</tr>

						</tbody>
					</table>

					<div class="card-footer" style="text-align: center">
						   <nav aria-label="Page navigation example" style="margin-top: 20px;">
                    <ul class="pagination justify-content-center">
                        <li class="page-item">
                            <a class="page-link" href="#" tabindex="-1" aria-disabled="true">
                                <i class="fas fa-hand-point-left"></i></a>
                        </li>
                        <li class="page-item"><a class="page-link" href="#">1</a></li>
                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                        <li class="page-item">
                            <a class="page-link" href="#"><i class="fas fa-hand-point-right"></i></a>
                        </li>
                    </ul>
                </nav>
					</div>
				</div>
			</article>
		</div>
	</div>
<th:block layout:fragment="js">
    <script th:src="@{/js/select2.min.js}"></script>
    <script th:src="@{/js/jquery.inputmask.bundle.min.js}"></script>

    <script>
    $(document).ready(function(){
    	 $('#datemask').inputmask('dd/mm/yyyy');
         $("#sodt").inputmask({"mask": "(99)(99)999-9999"});
    });
       
    </script>
</th:block>
</body>
</html>